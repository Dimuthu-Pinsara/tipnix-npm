{"version":3,"file":"index.cjs.js","sources":["../src/index.ts"],"sourcesContent":["import \"./styles/tipnix.css\";\n\nexport interface TipNixOptions {\n    textColor?: string;\n    backgroundColor?: string;\n    fontSize?: string;\n    animation?: string;\n    width?: string;\n    padding?: string;\n    parentWrapElement?: string;\n    selector?: string;\n  }\n  \n  // Helper to support both data-tipnix-* (recommended) and legacy tipnix-*\n  function getAttr(\n    el: HTMLElement,\n    attr: string,\n    fallback?: string\n  ): string | undefined {\n    return (\n      el.getAttribute(`data-tipnix-${attr}`) ??\n      el.getAttribute(`tipnix-${attr}`) ??\n      fallback\n    );\n  }\n  \n  export function initTipNixTooltip(options: TipNixOptions = {}): void {\n    const {\n      textColor = \"#ffffff\",\n      backgroundColor = \"#333333\",\n      fontSize = \"16px\",\n      animation,\n      width = \"225px\",\n      padding = \"16px\",\n      parentWrapElement,\n      selector = \".tipnix\"\n    } = options;\n  \n    const tooltips = document.querySelectorAll<HTMLElement>(selector);\n    const windowWidth = window.innerWidth;\n    const direction = document.documentElement.getAttribute(\"dir\");\n    const isRtl = direction === \"rtl\";\n  \n    if (!tooltips.length) return;\n  \n    let styleEl = document.querySelector<HTMLStyleElement>(\"#tipnix-style\");\n    if (!styleEl) {\n      styleEl = document.createElement(\"style\");\n      styleEl.id = \"tipnix-style\";\n      document.head.appendChild(styleEl);\n    }\n  \n    tooltips.forEach((wrapper) => {\n      const customBackgroundColor = getAttr(wrapper, \"bg\", backgroundColor)!;\n      const customTextColor = getAttr(wrapper, \"text-color\", textColor)!;\n      const customFontSize = getAttr(wrapper, \"font-size\", fontSize)!;\n      const customWidth = getAttr(wrapper, \"width\", width)!;\n      const customPadding = getAttr(wrapper, \"padding\", padding)!;\n      const customParent = getAttr(wrapper, \"parent\", parentWrapElement);\n      const customAnimation = getAttr(wrapper, \"animation\", animation);\n      const tooltipTextContent = getAttr(wrapper, \"text\", \"\") || \"\";\n  \n      const span = document.createElement(\"span\");\n      span.classList.add(\"tipnix-tooltip\");\n      span.textContent = tooltipTextContent;\n  \n      const parsedWidth = parseInt(customWidth, 10);\n      const effectiveWidth =\n        parsedWidth > windowWidth ? `${windowWidth / 3}px` : customWidth;\n  \n      span.style.color = customTextColor;\n      span.style.backgroundColor = customBackgroundColor;\n      span.style.fontSize = customFontSize;\n      span.style.width = effectiveWidth;\n      span.style.padding = customPadding;\n  \n      // Animation rules\n      if (customAnimation) {\n        const rand = generateRandomWord(4);\n        span.classList.add(rand);\n        styleEl!.innerHTML += `\n          ${selector}:hover .${rand} {\n            animation: ${customAnimation} 0.5s ease-in-out both;\n          }\n        `;\n      } else if (animation) {\n        styleEl!.innerHTML += `\n          ${selector}:hover .tipnix-tooltip {\n            animation: ${animation} 0.5s ease-in-out both;\n          }\n        `;\n      } else {\n        styleEl!.innerHTML += `\n          ${selector}:hover .tipnix-tooltip {\n            animation: shake 0.5s ease-in-out both;\n          }\n        `;\n      }\n  \n      span.style.setProperty(\"--tooltip-before-left\", \"50%\");\n      wrapper.appendChild(span);\n  \n      const wrapperWidth = wrapper.offsetWidth / 2;\n  \n      let parentEl: HTMLElement | null = null;\n      if (customParent) {\n        parentEl = document.querySelector<HTMLElement>(customParent);\n      } else if (parentWrapElement) {\n        parentEl = document.querySelector<HTMLElement>(parentWrapElement);\n      }\n  \n      const wrapperRect = wrapper.getBoundingClientRect();\n      const parentRect = parentEl?.getBoundingClientRect();\n  \n      let position: number;\n      if (parentRect) {\n        position = isRtl\n          ? parentRect.right - wrapperRect.right\n          : wrapperRect.left - parentRect.left;\n      } else {\n        position = isRtl ? wrapperRect.right : wrapperRect.left;\n      }\n  \n      const contentWidth = span.offsetWidth;\n      const contentHeight = span.offsetHeight + 15;\n  \n      span.style.top = `-${contentHeight}px`;\n  \n      if (position < contentWidth / 2) {\n        if (isRtl) {\n          span.style.right = `${-position}px`;\n          span.style.setProperty(\n            \"--tooltip-before-right\",\n            `${position + wrapperWidth - 10}px`\n          );\n          span.style.setProperty(\"--tooltip-before-left\", \"unset\");\n        } else {\n          span.style.left = `${-position}px`;\n          span.style.setProperty(\n            \"--tooltip-before-left\",\n            `${position + wrapperWidth - 2}px`\n          );\n          span.style.setProperty(\"--tooltip-before-right\", \"unset\");\n        }\n        span.style.transform = \"translateX(0)\";\n      } else {\n        span.style.left = \"unset\";\n        span.style.transform = \"unset\";\n        span.style.setProperty(\"--tooltip-before-left\", \"50%\");\n      }\n  \n      wrapper.addEventListener(\"mouseenter\", () => {\n        updateVerticalPosition(wrapper, span);\n      });\n    });\n  }\n  \n  function updateVerticalPosition(wrapper: HTMLElement, span: HTMLElement): void {\n    const wrapTop = wrapper.getBoundingClientRect().top;\n    const tooltipHeight = span.offsetHeight + 15;\n    const wrapHeight = wrapper.offsetHeight + 10;\n  \n    const above = wrapTop > tooltipHeight;\n  \n    span.style.top = above ? `-${tooltipHeight}px` : `${wrapHeight}px`;\n    span.classList.toggle(\"tooltip-above\", above);\n    span.classList.toggle(\"tooltip-below\", !above);\n  }\n  \n  function generateRandomWord(length = 4): string {\n    const chars = \"abcdefghijklmnopqrstuvwxyz\";\n    return Array.from({ length }, () => chars[(Math.random() * chars.length) | 0]).join(\"\");\n  }\n  \n  // Optional utility export\n  export function getContrastColor(hexColor: string): string {\n    if (!hexColor) return \"#FFFFFF\";\n    hexColor = hexColor.replace(\"#\", \"\");\n  \n    if (hexColor.length === 3) {\n      hexColor = hexColor\n        .split(\"\")\n        .map((c) => c + c)\n        .join(\"\");\n    }\n  \n    const r = parseInt(hexColor.slice(0, 2), 16);\n    const g = parseInt(hexColor.slice(2, 4), 16);\n    const b = parseInt(hexColor.slice(4, 6), 16);\n  \n    const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;\n  \n    return luminance > 0.5 ? \"#000000\" : \"#FFFFFF\";\n  }"],"names":["getAttr","el","attr","fallback","_a","getAttribute","_b","hexColor","replace","length","split","map","c","join","parseInt","slice","options","textColor","backgroundColor","fontSize","animation","width","padding","parentWrapElement","selector","tooltips","document","querySelectorAll","windowWidth","window","innerWidth","isRtl","documentElement","styleEl","querySelector","createElement","id","head","appendChild","forEach","wrapper","customBackgroundColor","customTextColor","customFontSize","customWidth","customPadding","customParent","customAnimation","tooltipTextContent","span","classList","add","textContent","effectiveWidth","style","color","rand","chars","Array","from","Math","random","generateRandomWord","innerHTML","setProperty","wrapperWidth","offsetWidth","parentEl","wrapperRect","getBoundingClientRect","parentRect","position","right","left","contentWidth","contentHeight","offsetHeight","top","transform","addEventListener","wrapTop","tooltipHeight","wrapHeight","above","toggle","updateVerticalPosition"],"mappings":"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"}