{"version":3,"file":"index.cjs.js","sources":["../src/utils.ts","../src/tooltip.ts"],"sourcesContent":["/** Utility helpers for the TipNix tooltip library */\n\n/** Generate a random word of given length (default 4) */\nexport function generateRandomWord(length: number = 4): string {\n    const characters = 'abcdefghijklmnopqrstuvwxyz';\n    let randomWord = '';\n    for (let i = 0; i < length; i++) {\n        const randomIndex = Math.floor(Math.random() * characters.length);\n        randomWord += characters[randomIndex];\n    }\n    return randomWord;\n}\n\n/** Return a contrasting color (black or white) for a given hex background */\nexport function getContrastColor(hexColor: string): string {\n    let hex = hexColor.replace('#', '');\n    if (hex.length === 3) {\n        hex = hex.split('').map((c) => c + c).join('');\n    }\n    const r = parseInt(hex.substr(0, 2), 16);\n    const g = parseInt(hex.substr(2, 2), 16);\n    const b = parseInt(hex.substr(4, 2), 16);\n    const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;\n    return luminance > 0.5 ? '#000000' : '#FFFFFF';\n}\n\n/** Update vertical position of tooltip based on available space */\nexport function updateVerticalPosition(wrapper: HTMLElement, tooltip: HTMLElement): void {\n    const wrapTop = wrapper.getBoundingClientRect().top;\n    const tooltipHeight = tooltip.offsetHeight + 15;\n    const wrapHeight = wrapper.offsetHeight + 10;\n    const above = wrapTop > tooltipHeight;\n    tooltip.style.top = above ? `-${tooltipHeight}px` : `${wrapHeight}px`;\n    tooltip.classList.toggle('tooltip-above', above);\n    tooltip.classList.toggle('tooltip-below', !above);\n}\n\n/** Helper to safely read data attributes (both data-tipnix-* and tipnix-*) */\nexport function getAttr(el: HTMLElement, attr: string, fallback?: string): string | undefined {\n    return (\n        el.getAttribute(`data-tipnix-${attr}`) ??\n        el.getAttribute(`tipnix-${attr}`) ??\n        fallback\n    );\n}\n","import { TipNixOptions } from './types';\nimport { generateRandomWord, getAttr, updateVerticalPosition } from './utils';\n\n/**\n * Initialise tooltips on the page.\n * @param options Configuration options for default styling and behaviour.\n */\nexport function initTipNixTooltip(options: TipNixOptions = {}): void {\n    const {\n        textColor = '#ffffff',\n        backgroundColor = '#333333',\n        fontSize = '16px',\n        animation,\n        width = '225px',\n        padding = '16px',\n        parentWrapElement,\n        selector = '.tipnix',\n    } = options;\n\n    const tooltips = document.querySelectorAll<HTMLElement>(selector);\n    if (!tooltips.length) return;\n\n    // Ensure a single style element exists\n    let styleEl = document.querySelector<HTMLStyleElement>('#tipnix-style');\n    if (!styleEl) {\n        styleEl = document.createElement('style');\n        styleEl.id = 'tipnix-style';\n        document.head.appendChild(styleEl);\n    }\n\n    const windowWidth = window.innerWidth;\n    const isRtl = document.documentElement.getAttribute('dir') === 'rtl';\n\n    tooltips.forEach((wrapper) => {\n        // Resolve per‑element overrides via data attributes\n        const customBackgroundColor = getAttr(wrapper, 'bg', backgroundColor);\n        const customTextColor = getAttr(wrapper, 'text-color', textColor);\n        const customFontSize = getAttr(wrapper, 'font-size', fontSize);\n        const customWidth = getAttr(wrapper, 'width', width);\n        const customPadding = getAttr(wrapper, 'padding', padding);\n        const customParent = getAttr(wrapper, 'parent', parentWrapElement);\n        const customAnimation = getAttr(wrapper, 'animation', animation);\n        const tooltipText = getAttr(wrapper, 'text', '') ?? '';\n\n        // Create tooltip element\n        const tooltip = document.createElement('span');\n        tooltip.classList.add('tipnix-tooltip');\n        tooltip.textContent = tooltipText;\n        tooltip.style.color = customTextColor || textColor;\n        tooltip.style.backgroundColor = customBackgroundColor || backgroundColor;\n        tooltip.style.fontSize = customFontSize || fontSize;\n        tooltip.style.padding = customPadding || padding;\n        // Width handling – clamp to viewport width\n        const parsedWidth = parseInt(customWidth!);\n        tooltip.style.width =\n            parsedWidth > windowWidth ? `${windowWidth - 50}px` : customWidth!;\n\n        // Animation handling\n        if (customAnimation) {\n            const animClass = generateRandomWord(4);\n            tooltip.classList.add(animClass);\n            styleEl!.innerHTML += `\n        ${selector}:hover .${animClass} {\n          animation: ${customAnimation} 0.5s ease-in-out both;\n        }\n      `;\n        } else {\n            // default shake animation (user can provide their own via CSS)\n            styleEl!.innerHTML += `\n        ${selector}:hover .tipnix-tooltip {\n          animation: shake 0.5s ease-in-out both;\n        }\n      `;\n        }\n\n        // Append tooltip to wrapper\n        wrapper.appendChild(tooltip);\n\n        // Positioning logic\n        const wrapperRect = wrapper.getBoundingClientRect();\n        const tooltipRect = tooltip.getBoundingClientRect();\n        const parentEl = customParent\n            ? document.querySelector<HTMLElement>(customParent)\n            : parentWrapElement\n                ? document.querySelector<HTMLElement>(parentWrapElement)\n                : null;\n\n        // Horizontal offset calculation\n        let offset = 0;\n        if (parentEl) {\n            const parentRect = parentEl.getBoundingClientRect();\n            offset = isRtl\n                ? parentRect.right - wrapperRect.right\n                : wrapperRect.left - parentRect.left;\n        } else {\n            offset = isRtl ? wrapperRect.right : wrapperRect.left;\n        }\n\n        // Apply horizontal positioning\n        if (offset < tooltipRect.width / 2) {\n            if (isRtl) {\n                tooltip.style.right = `${-offset}px`;\n                tooltip.style.setProperty('--tooltip-before-right', `${offset + wrapperRect.width - 10}px`);\n                tooltip.style.setProperty('--tooltip-before-left', 'unset');\n            } else {\n                tooltip.style.left = `${-offset}px`;\n                tooltip.style.setProperty('--tooltip-before-left', `${offset + wrapperRect.width - 2}px`);\n                tooltip.style.setProperty('--tooltip-before-right', 'unset');\n            }\n        } else {\n            tooltip.style.left = 'unset';\n            tooltip.style.setProperty('--tooltip-before-left', '50%');\n        }\n\n        // Vertical positioning on hover\n        wrapper.addEventListener('mouseenter', () => {\n            updateVerticalPosition(wrapper, tooltip);\n        });\n    });\n}\n"],"names":["getAttr","el","attr","fallback","_a","getAttribute","_b","options","textColor","backgroundColor","fontSize","animation","width","padding","parentWrapElement","selector","tooltips","document","querySelectorAll","length","styleEl","querySelector","createElement","id","head","appendChild","windowWidth","window","innerWidth","isRtl","documentElement","forEach","wrapper","customBackgroundColor","customTextColor","customFontSize","customWidth","customPadding","customParent","customAnimation","tooltipText","tooltip","classList","add","textContent","style","color","parsedWidth","parseInt","animClass","characters","randomWord","i","Math","floor","random","generateRandomWord","innerHTML","wrapperRect","getBoundingClientRect","tooltipRect","parentEl","offset","parentRect","right","left","setProperty","addEventListener","wrapTop","top","tooltipHeight","offsetHeight","wrapHeight","above","toggle","updateVerticalPosition"],"mappings":"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"}